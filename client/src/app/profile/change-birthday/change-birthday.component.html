<section class="change-page">
  <ng-container
    *ngIf="(isBirthdayUpdated$ | async) === false; else successMessage"
  >
    <header class="change-page__header">
      <mat-icon
        svgIcon="arrow_left"
        class="change-page__icon"
        routerLink="/account/profile"
        matTooltip="Return to the profile page"
        matTooltipPosition="below"
        matTooltipHideDelay="100"
        matTooltipShowDelay="100"
      ></mat-icon>
      <h1 class="change-page__title">Profile</h1>
    </header>
    <div class="change-page__form-wrapper">
      <form
        [formGroup]="formGroup"
        (submit)="onSubmit()"
        class="change-page__form"
      >
        <mat-form-field>
          <mat-label>Choose a date</mat-label>
          <input
            matInput
            [matDatepicker]="datepicker"
            [formControlName]="formField.name"
          />
          <mat-hint>{{ formField.placeholder }}</mat-hint>
          <mat-datepicker-toggle
            matIconSuffix
            [for]="datepicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #datepicker></mat-datepicker>
          <mat-error *ngFor="let error of errorMessages">
            {{ error }}
          </mat-error>
        </mat-form-field>

        <app-button type="submit" [disabled]="!formControl.valid"
          >Save</app-button
        >
      </form>
    </div>
  </ng-container>
  <ng-template #successMessage>
    <div class="change-page__success">
      <app-link linkPath="/account/profile">
        <p descText>Birthday date changed successfully!</p>
        <p linkText>Back to profile page</p>
      </app-link>
    </div>
  </ng-template>
</section>
